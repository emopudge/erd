## ER-модель ресторана с системой автоматизации ресурсов в Ченовской нотации (исправленная)

**Тема:** Ресторан с системой автоматизации ресурсов

**Описание:** 

Система автоматизации  позволяет официантам:

* Вносить заказы гостей
* Проводить расчеты
* Просматривать информацию о наличии продуктов

**Сущности:**

1. **Заказ (Order)** - сильная сущность
    * **Атрибуты:**
        * Номер заказа (OrderID) - **ключевой атрибут**
        * Дата заказа (OrderDate)
        * Время заказа (OrderTime)
        * Стол (Table)
        * Официант (Waiter)
        * Статус заказа (OrderStatus)

2. **Блюдо (Dish)** - сильная сущность
    * **Атрибуты:**
        * Название блюда (DishName) - **ключевой атрибут**
        * Тип блюда (DishType)
        * Описание блюда (DishDescription)
        * Цена (Price)
        * Наличие (Availability)

3. **Продукт (Ingredient)** - сильная сущность
    * **Атрибуты:**
        * Название продукта (IngredientName) - **ключевой атрибут**
        * Единица измерения (Unit)
        * Количество на складе (QuantityInStock)
        * Минимальное количество на складе (MinStock)
        * Цена за единицу (UnitPrice)

4. **Рецепт (Recipe)** - сильная сущность
    * **Атрибуты:**
        * Идентификатор рецепта (RecipeID) - **ключевой атрибут**
        * Название блюда (DishName) 
        * Количество (Quantity)
        * Единица измерения (Unit)

5. **Официант (Waiter)** - сильная сущность
    * **Атрибуты:**
        * Идентификатор официанта (WaiterID) - **ключевой атрибут**
        * Имя официанта (WaiterName)
        * Фамилия официанта (WaiterSurname)

6. **Гость (Guest)** - сильная сущность
    * **Атрибуты:**
        * Идентификатор гостя (GuestID) - **ключевой атрибут**
        * Имя гостя (GuestName)
        * Фамилия гостя (GuestSurname)
        * Номер телефона (PhoneNumber)

7. **Счет (Bill)** - сильная сущность
    * **Атрибуты:**
        * Номер счета (BillID) - **ключевой атрибут**
        * Дата счета (BillDate)
        * Время счета (BillTime)
        * Стол (Table)
        * Официант (Waiter)
        * Сумма (TotalAmount)

8. **Стол (Table)** - сильная сущность
    * **Атрибуты:**
        * Номер стола (TableID) - **ключевой атрибут**
        * Вместимость (Capacity)
        * Статус (TableStatus)

9. **Система автоматизации (AutomationSystem)** - слабая сущность
    * **Атрибуты:**
        * Идентификатор системы (SystemID) - **ключевой атрибут**
        * Тип системы (SystemType)
        * Версия системы (SystemVersion)

10. **Платеж (Payment)** - сильная сущность
    * **Атрибуты:**
        * Идентификатор платежа (PaymentID) - **ключевой атрибут**
        * Тип платежа (PaymentType)
        * Сумма платежа (PaymentAmount)
        * Дата платежа (PaymentDate)
        * Время платежа (PaymentTime)

**Связи:**

1. **Заказ (Order) - Блюдо (Dish)** - "многие ко многим" (N:M) - **превращаем в "один ко многим" (1:N)**
    * **Создаем промежуточную сущность:** "Детали заказа (OrderDetails)"
    * **Детали заказа (OrderDetails):**
        * Идентификатор детали заказа (OrderDetailID) - **ключевой атрибут**
        * Номер заказа (OrderID)
        * Название блюда (DishName)
        * Количество (Quantity)
    * **Связи:**
        * **Заказ (Order) - Детали заказа (OrderDetails):** "один ко многим" (1:N) 
        * **Детали заказа (OrderDetails) - Блюдо (Dish):** "один ко многим" (1:N) 

2. **Заказ (Order) - Официант (Waiter)** - "один к многим" (1:N) - **сильная связь**
    * Описание: Один официант может принимать несколько заказов, но один заказ может быть принят только одним официантом.

3. **Заказ (Order) - Гость (Guest)** - "один к многим" (1:N) - **сильная связь**
    * Описание: Один гость может сделать несколько заказов, но один заказ может быть сделан только одним гостем.

4. **Блюдо (Dish) - Рецепт (Recipe)** - "один к одному" (1:1) - **сильная связь**
    * Описание: Одно блюдо имеет один и только один рецепт.

5. **Рецепт (Recipe) - Продукт (Ingredient)** - "многие ко многим" (N:M) - **превращаем в "один ко многим" (1:N)**
    * **Создаем промежуточную сущность:** "Ингредиенты в рецепте (IngredientInRecipe)"
    * **Ингредиенты в рецепте (IngredientInRecipe):**
        * Идентификатор ингредиента в рецепте (IngredientInRecipeID) - **ключевой атрибут**
        * Идентификатор рецепта (RecipeID)
        * Название продукта (IngredientName)
        * Количество (Quantity)
        * Единица измерения (Unit)
    * **Связи:**
        * **Рецепт (Recipe) - Ингредиенты в рецепте (IngredientInRecipe):** "один ко многим" (1:N) 
        * **Ингредиенты в рецепте (IngredientInRecipe) - Продукт (Ingredient):** "один ко многим" (1:N) 

6. **Счет (Bill) - Заказ (Order)** - "один к многим" (1:N) - **сильная связь**
    * Описание: Один счет может включать несколько заказов, но один заказ может быть включен только в один счет.

7. **Счет (Bill) - Гость (Guest)** - "один к многим" (1:N) - **сильная связь**
    * Описание: Один гость может иметь несколько счетов, но один счет может быть создан только для одного гостя.

8. **Счет (Bill) - Официант (Waiter)** - "один к многим" (1:N) - **сильная связь**
    * Описание: Один официант может выписывать несколько счетов, но один счет может быть выписан только одним официантом.

9. **Заказ (Order) - Система автоматизации (AutomationSystem)** - "один к одному" (1:1) - **сильная связь**
    * Описание: Система автоматизации используется для обработки всех заказов.

10. **Счет (Bill) - Платеж (Payment)** - "один к одному" (1:1) - **сильная связь**
    * Описание: К каждому счету привязан один и только один платеж.

**Примечание:**

* В данной ER-модели не указаны все возможные атрибуты сущностей, но она включает в себя основные атрибуты, необходимые для представления бизнес-процессов ресторана.
* Данная модель может быть модифицирована в зависимости от специфики ресторана и его автоматизированной системы.
* Для более подробного анализа ER-модели можно добавить связи с такими сущностями, как **Кухня (Kitchen)**, **Поставщик (Supplier)**, **Сотрудник (Employee)** и т.д.

**Используемые обозначения:**

* Сильные сущности - обозначаются прямоугольниками с толстыми линиями.
* Слабые сущности - обозначаются прямоугольниками с тонкими линиями.
* Сильные связи - обозначаются линиями с "галочкой" с одной стороны.
* Слабые связи - обозначаются линиями с "ромбом" с одной стороны.

Данная ER-модель является базовой и может быть дополнена в зависимости от специфики ресторана и его системы автоматизации. 

**Важно:**

* Теперь в модели нет слабых связей "многие ко многим".
* Мы создали две промежуточные сущности: "Детали заказа (OrderDetails)" и "Ингредиенты в рецепте (IngredientInRecipe)" для представления связей "один ко многим" между сущностями, которые ранее имели связь "многие ко многим".
* Это позволяет избежать дублирования информации и поддерживать целостность данных.
